%div.fade{"ng-init" => "init()"}
  .row
    %ol.breadcrumb
      %li
        %a{href: "#/{[{sol.issue.project.username}]}"} {[{sol.issue.project.username}]}
      %li
        %a{href: "#\{[{sol.issue.project.get_abs_url}]}"} {[{ sol.issue.project.name }]}
      %li
        %a{href: "#\{[{sol.issue.get_abs_url}]}"} {[{ sol.issue.title }]}
      %li.active {[{sol.title}]}
  %div
    .row
      .col-md-8.no-gutter
        %h2
          %span{"ng-show" => "sol.user_acl.edit_title"}
            %span{"ng-show" => "editing.sol.title"}
              .input-group
                %input.form-control{"ng-model" => "sol.title", type: "text"}/
                %span.btn.btn-info.input-group-addon{"ng-click" => "save('sol.title')"}
                  %i.fa.fa-save{"ng-hide" => "saving.sol.title"}
                  %i.fa.fa-spinner.fa-spin{"ng-show" => "saving.sol.title"}
                %span.btn.btn-primary.input-group-addon{"ng-click" => "revert('sol.title')"}
                  %i.fa.fa-times-circle
            %span{"ng-hide" => "editing.sol.title"}
              {[{ sol.title }]} 
              %small.fa.fa-edit.icon-hover{"ng-click" => "toggle('sol.title')"}
          %span{"ng-hide" => "sol.user_acl.edit_title"}
            {[{ sol.title }]}
          %br
          %a.button{"toggle-button" => "sol.subscribed",
          "ng-click" => "swap_save('sol.subscribed')"}
            %i{off: "fa-eye", on: "fa-eye-slash"}
            .in-button{off: "Watch", on: "Unwatch"}
          %a.button{"toggle-button" => "sol.vote_status",
          "ng-click" => "swap_save('sol.vote_status')"}
            %i{on: "fa-minus-circle", off: "fa-plus-circle"}
            .in-button{off: "Vote", on: "Unvote"}
    %br/
    .row
      %h4
        %b> Proposed on
        {[{ sol.created_at | date:'medium' }]}
        ({[{ sol.created_at|date_ago }]})
      %br/
      %div.btn.btn-default.pull-right{"ng-click" => "toggle('sol.desc')",
        "ng-show" => "sol.user_acl.edit_desc", "ng-hide" => "editing.sol.desc"}
        Edit
      .row.well.well-lg.center-margin
        .row.col-lg-11{"ng-show" => "editing.sol.desc"}
          %textarea{"mark-it-up" => "", "ng-model" => "sol.desc"}
          %span.btn.btn-info{"ng-click" => "save('sol.desc')", "ng-disabled" => "saving.sol.desc"}
            %i.fa.fa-save{"ng-hide" => "saving.sol.desc"}
            %i.fa.fa-spinner.fa-spin{"ng-show" => "saving.sol.desc"}
            \ Save
          %span.btn.btn-primary{"ng-click" => "revert('sol.desc')", "ng-disabled" => "saving.sol.desc"}
            %i.fa.fa-times-circle
            \ Discard
        %div{"ng-hide" => "editing.sol.desc"}
          %span{"btf-markdown" => "sol.desc"}
  .row{"ng-show" => "sol.events.length > 0"}
    %h3 Events
    %div{"ng-repeat" => "event in project.events"}
      %span{"ng-include" => "'templates/' + event.template"}
  .row{"ng-show" => "logged_in"}
    %textarea{"mark-it-up" => "", "ng-model" => "new_comment.body"}
