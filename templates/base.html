<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% block head %}
    <link href="/static/lib/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="/static/css/main.css" rel="stylesheet" media="screen">
    <link href="/static/lib/css/font-awesome.min.css" rel="stylesheet">
    <title>{% block title %}{% endblock %} - Featurelet</title>
    {% endblock %}
  </head>
  <body ng-app="mainApp">
    <!-- Templates -->
    <script type="text/ng-template" id="main.html">
      <div ng-init="init()">
        <div dynamic="html_out"></div>
      </div>
    </script>
    <!-- Jquery -->
    <script src="//code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="//malsup.github.com/jquery.form.js"></script>
    <!-- Yota -->
    <script src="/static/lib/js/yota.js"></script>
    <!-- Showdown -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/showdown/0.3.1/showdown.min.js"></script>
    <!-- Angular -->
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.0-rc.2/angular.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.0-rc.2/angular-resource.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.0-rc.2/angular-route.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.0-rc.2/angular-sanitize.min.js"></script>
    <!-- Noty notifications -->
    <script src="//cdn.jsdelivr.net/noty/2.1.0/jquery.noty.js"></script>
    <script src="//cdn.jsdelivr.net/noty/2.1.0/layouts/top.js"></script>
    <script src="//cdn.jsdelivr.net/noty/2.1.0/themes/default.js"></script>
    <!-- Bootstrap -->
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
    <!-- Markitup Markdown editor -->
    <script type="text/javascript" src="/static/lib/js/jquery.markitup.js"></script>
    <!-- Strip -->
    <script type"text/javascript" src="https://checkout.stripe.com/checkout.js"></script>
    <!-- My libs -->
    <script src="/static/js/lib.js"></script>
    <script src="/static/js/main.js"></script>
    <script src="/static/js/app.js"></script>
    <script src="/static/js/controllers.js"></script>
    <script src="/static/js/services.js"></script>
    {% block post_script %}{% endblock %}
    <div id="wrap" ng-controller="rootController" ng-init="init({{logged_in}}, '{{userid}}')">
      <div class="navbar navbar-default navbar-fixed-top">
          <div class="container no-gutter">
              <a class="navbar-brand logo" href="#/home">
                <span class="hidden-xs"><img src="/static/img/logo.jpg" border="0" /></span>
                <span class="visible-xs"><img src="/static/img/logo_sm.jpg" border="0" /></span>
              </a>
              <ul class="nav nav-pills main-nav-pills">
                <li ng-show="logged_in"
                ng-class="{true: 'active'}[location.path().lastIndexOf('/account', 0) === 0]">
                  <a href="#/account">
                    <i class="fa fa-large fa-gear"></i>
                    <span class="hidden-xs"> Account</span>
                  </a>
                </li>
                <li ng-show="logged_in"
                    ng-class="{true: 'active'}[location.path()==profile]">
                  <a href="#{[{profile}]}">
                    <i class="fa fa-large fa-user"></i>
                    <span class="hidden-xs"> Profile</span>
                  </a>
                </li>
                <li ng-show="logged_in">
                  <a href="#/logout">
                    <i class="fa fa-large fa-sign-out"></i>
                    <span class="hidden-xs"> Logout</span>
                  </a>
                </li>
                <li ng-hide="logged_in"
                ng-class="{true: 'active'}[location.path()=='/signup']">
                  <a href="#/signup">
                    <i class="fa fa-large fa-edit"></i>
                    <span class="hidden-xs"> Sign Up</span>
                  </a>
                </li>
                <li ng-hide="logged_in"
                ng-class="{true: 'active'}[location.path()=='/login']">
                  <a href="#/login">
                    <i class="fa fa-sign-in fa-large"></i>
                    <span class="hidden-xs"> Login</span>
                  </a>
                </li>
              </ul>
          </div>
      </div>
      <div class="container main-cont" ng-view>
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
           {% for category, message in messages %}
                <br />
                {% if category == 'message' %}{% set category = 'danger' %}{% endif %}
                <div class="alert alert-block alert-{{category}} fade in">
                    <a class="close" data-dismiss="alert" href="#">Ã—</a>
                      {{ message }}
                </div>
            {% endfor %}
          {% endif %}
        {% endwith %}
        {% block content %}{% endblock %}
      </div>
    </div>
    <div id="footer navbar-default navbar">
      <div class="container">
        <p class="text-muted" style="margin:20px 0px;">
        {% block footer %}
        &copy; Copyright 2013 by me.
        {% endblock %}
        </p>
      </div>
    </div>
  </body>
</html>
