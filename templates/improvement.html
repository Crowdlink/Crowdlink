{% extends "base.html" %}

{% block title %}View Improvement "{{ imp.brief }}"{% endblock %}
{% block content %}
<ol class="breadcrumb">
  <li><a href="{{imp.project.maintainer.get_abs_url()}}">{{imp.project.maintainer}}</a></li>
  <li><a href="{{imp.project.get_abs_url()}}">{{ imp.project.name }}</a></li>
  <li><a href="">Improvements</a></li>
  <li class="active">{{imp.brief}}</li>
</ol>
<div class="row">
  <h2>
    {% if can_edit %}
    <span id="brief"
        data-key="brief"
        data-type="edit-trigger"
        data-url-key="{{imp.url_key}}"
        data-proj-id="{{imp.project.id}}"
        id="improvement-brief-edit">
        <span id="brief_edit" style="display:none;">
          <div class="input-group">
            <input id="brief_input"
                type="text"
                class="form-control" />
            <span class="btn btn-info input-group-addon" id="brief_spinner" data-action="save_brief(t, key, display, revert);">
              <i class="icon-save"></i>
            </span>
            <span class="btn btn-primary input-group-addon" data-action="revert();">
              <i class="icon-remove"></i>
            </span>
          </div><!-- /input-group --> 
        </span>
        <span id="brief_display">
          <span id="brief_output">{{ imp.brief }}</span>&nbsp;
          <small class="icon-edit icon-hover" data-action="edit();"></small>
        </span>
    </span>
    {% else %}
      {{ imp.brief }}
    {% endif %}
  </h2>
</div>
<br />
<div class="row">
    <div class="btn btn-sm btn-info"><i class="icon-eye-open"></i> &nbsp;Watch</div>
    <div class="btn btn-sm btn-info"><i class="icon-arrow-up"></i> &nbsp;Upvote</div>
</div>
<br />
<div class="row">
  <h4>
    <b>Proposed on </b>{{ imp.created_at|date }}
    ({{ imp.created_at|date_ago }})
  </h4>
  <br>
  <div class="row well center col-lg-11" id="{{imp.url_key}}_{{imp.creator.username}}_display">
      {% if can_edit %}
      <i class="icon-edit icon-3x icon-hover pull-right" data-type="edit-trigger" data-show="{{imp.url_key}}_{{imp.creator.username}}"></i>
      {% endif %}
      {{imp.md|safe}}
  </div>
  {% if can_edit %}
  <div class="row col-lg-11" id="{{imp.url_key}}_{{imp.creator.username}}_edit" style="display:none;">
    <script type="text/javascript" >
      $(document).ready(function() {
        $(".markItUp").markItUp(mySettings);
      });
    </script>
    <textarea class="markItUp">{{imp.description}}</textarea>
  </div>
  {% endif %}
</div>
{{ comment_form|safe }}
{% endblock %}
